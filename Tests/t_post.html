</head>
<script>

// should make a request to it's own server to Auth.php requesting the URL for the button
function loadTest(){
console.log("function is running");
var xmlhttp;
if (window.XMLHttpRequest){
  xmlhttp=new XMLHttpRequest();
}
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById("test").innerHTML=xmlhttp.responseText;
    }
  }

xmlhttp.open("POST","test.php?access_token=jake");

var params = {
  first: "John",
  last: "Doe",
  age: 39,
  sex: "M",
  salary: 70000,
  registered: true,
  interests: [ "Reading", "Mountain Biking", "Hacking" ],
  favorites: {
    color: "Blue",
    sport: "Soccer",
    food: "Spaghetti"
  }, 
  "skills": [
    {
      "category": "JavaScript",
      "tests": [
        { "name": "One", "score": 90 },
        { "name": "Two", "score": 96 }
      ] 
    },
    {
      "category": "CouchDB",
      "tests": [
        { "name": "One", "score": 79 },
        { "name": "Two", "score": 84 }
      ] 
    },
    {
      "category": "Node.js",
      "tests": [
        { "name": "One", "score": 97 },
        { "name": "Two", "score": 93 }
      ] 
    }
  ]
};
xmlhttp.send(JSON.stringify(params));
}






function loadURL(){
var xmlhttp;
if (window.XMLHttpRequest){
  xmlhttp=new XMLHttpRequest();
}
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById("button").href=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","Auth.php?href=loggedin.html",true);
xmlhttp.send();
loadTest();
}

window.onload=loadURL();
</script>
</head>

<body>
<a id="button">
Login with Google
</a>
<div id="test">no request sent</div>
</body>

